{"version":3,"file":"index.js","sources":["../src/js/refs.js","../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["export const refs = {\n    form: document.querySelector('.form'),\n    input: document.querySelector('input[name=\"search-text\"]'),\n    gallery: document.querySelector('.js-gallery'),\n    loader: document.querySelector('.js-loader'),\n    loader2: document.querySelector('.js-loader2'),\n    // loaderArea: document.querySelector('.loader-area'),\n    loadContainer: document.querySelector('.load-container'),\n    button: document.querySelector('button'),\n    loadMoreBtn: document.querySelector('.js-more-button'),\n    endResults: document.querySelector('.js-end-result'),\n  };","  import { refs } from './refs.js'\n  import SimpleLightbox from \"simplelightbox\";\n  import \"simplelightbox/dist/simple-lightbox.min.css\";\n  \n  export const lightbox = new SimpleLightbox(\".js-gallery a\", {\n    captions: true,\n    captionsData: \"alt\",\n    captionDelay: 250,\n    captionPosition: \"bottom\"\n  });\n\n  export function createGallery(images, append = false) {\n    const markup = images.map(image => (\n      `<li class=\"gallery-item\">\n      <div class=\"gallery-container\">\n      <div class=\"gallery\">\n        <a class=\"preview\" href=\"${image.largeImageURL}\"><img src=\"${image.webformatURL}\" alt=\"${image.tags}\" title=\"\"/></a>\n    </div>\n\n    <div class=\"description\">\n          <div class=\"sub-descr\">\n          <span class=\"img-descr-title\">Likes</span>\n          <span class=\"img-descr\">${image.likes}</span>\n        </div>\n        <div class=\"sub-descr\">\n          <span class=\"img-descr-title\">Views</span>\n          <span class=\"img-descr\">${image.views}</span>\n        </div>\n        <div class=\"sub-descr\">\n          <span class=\"img-descr-title\">Comments</span>\n          <span class=\"img-descr\">${image.comments}</span>\n        </div>\n        <div class=\"sub-descr\">\n          <span class=\"img-descr-title\">Downloads</span>\n          <span class=\"img-descr\">${image.downloads}</span>\n        </div>\n    </div>\n    </div>\n    </li>`\n\n    )).join('');\n\n    if (append) {\n      refs.gallery.insertAdjacentHTML(\"beforeend\", markup);\n    } else {\n      refs.gallery.innerHTML = markup;\n    };\n    lightbox.refresh();\n  };\n\n\n  export function clearGallery() {\n    refs.gallery.innerHTML = '';\n  };\n\n  export function showLoader() {\n    refs.loader.classList.remove('hidden');\n  };\n\n  export function hideLoader() {\n    refs.loader.classList.add('hidden');\n  };\n\n  export function showLoader2() {\n    refs.loader2.classList.remove('hidden');\n  };\n\n  export function hideLoader2() {\n    refs.loader2.classList.add('hidden');\n  };\n\n  export function showLoadMoreButton() {\n    refs.loadMoreBtn.classList.remove('hidden');\n  };\n\n  export function hideLoadMoreButton() {\n    refs.loadMoreBtn.classList.add('hidden');\n  };\n\n\n\n\n","import axios from 'axios';\n\n export async function getImagesByQuery(query, currentPage) {\n   try {\n    const result = await axios.get('https://pixabay.com/api/', {\n    params: {\n        key: '53354647-5c23245d0a5319fc788c83675',\n            q: query,\n            image_type: 'photo',\n            orientation: 'horizontal',\n            safesearch: true,\n            per_page: 15,\n            page: currentPage,\n    }\n   });\n   console.log(result.data);\n   return result.data;\n} catch (error) {\n    console.log(error);\n};\n }; \n\n\n\n\n","import { refs } from './js/refs';\nimport { clearGallery } from './js/render-functions';\nimport { showLoader } from './js/render-functions';\nimport { hideLoader } from './js/render-functions';\nimport { showLoader2 } from './js/render-functions';\nimport { hideLoader2 } from './js/render-functions';\nimport { getImagesByQuery } from './js/pixabay-api';\nimport { createGallery } from './js/render-functions';\nimport { showLoadMoreButton } from './js/render-functions';\nimport { hideLoadMoreButton } from './js/render-functions';\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nconst PER_PAGE = 15;\nlet query;\nlet currentPage = 1;\nlet totalPages;\n\nrefs.form.addEventListener('submit', async e => {\n    e.preventDefault();\n\n    refs.input.blur();\n    currentPage = 1;\n    const formData = new FormData(e.target);\n    query = formData.get('search-text').trim();\n\n    if(!query) {\n      iziToast.show({\n        message: `Type something to begin your search.`,\n        color: '#EF4040',\n        messageColor: 'white',\n        position: 'topRight',\n        messageSize: '20',\n        timeout: '2000',\n        theme: 'dark',\n      }); return;\n    } ;\n    showLoader();\n    clearGallery();\n    hideLoadMoreButton();\n\n    try{\n      const result = await getImagesByQuery(query, currentPage);\n      if(!result.hits || result.hits.length === 0) {\n        iziToast.show({\n          message: `Sorry, there are no images matching your search query. Please try again!`,\n          iconUrl: './img/bi_x-octagon.svg',\n          color: '#EF4040',\n          position: 'topRight',\n          messageSize: '20',\n          timeout: '4000',\n          theme: 'dark',\n        }); return;\n      }\n      createGallery(result.hits);\n      totalPages = Math.ceil(result.totalHits / PER_PAGE);\n      console.log(totalPages);\n      // console.log(markup);\n      handleLoadMoreBtn();\n  \n    } catch {\n      iziToast.show({\n          message: `Something went wrong. Please try again later.`,\n          iconUrl: './img/bi_x-octagon.svg',\n          color: '#EF4040',\n          position: 'topRight',\n          messageSize: '20',\n          timeout: '4000',\n          theme: 'dark',\n        });\n    };\n\n    hideLoader();\n    refs.form.reset();\n  });\n\n\n  refs.loadMoreBtn.addEventListener('click', async () => {\n    showLoader2();\n    hideLoadMoreButton();\n    currentPage += 1;\n  \n    try{\n      const result = await getImagesByQuery(query, currentPage);\n      if(!result.hits || result.hits.length === 0) {\n        iziToast.show({\n          message: `Sorry, there are no images matching your search query. Please try again!`,\n          iconUrl: './img/bi_x-octagon.svg',\n          color: '#EF4040',\n          position: 'topRight',\n          messageSize: '20',\n          timeout: '4000',\n          theme: 'dark',\n        });\n      }\n      handleLoadMoreBtn();\n      createGallery(result.hits, true);\n      scrollNewItems(refs.gallery, 2);\n    } catch {\n      iziToast.show({\n          message: `Something went wrong. Please try again later.`,\n          iconUrl: './img/bi_x-octagon.svg',\n          color: '#EF4040',\n          position: 'topRight',\n          messageSize: '20',\n          timeout: '4000',\n          theme: 'dark',\n        });\n    };\n    hideLoader2();\n    refs.form.reset();\n  });\n\n\n  function handleLoadMoreBtn() {\n    if(currentPage < totalPages) {\n      showLoadMoreButton();\n    } else {\n      hideLoadMoreButton();\n      refs.endResults.textContent = `We're sorry, but you've reached the end of search results.`\n    };\n  };\n\n\n// // Get the first <li> element\n// const galleryItem = refs.gallery.firstElementChild;\n\n// if (galleryItem) {\n//   // Measure height\n//   const height = galleryItem.getBoundingClientRect().height;\n\n//   // Get container gap (optional)\n//   const gap = parseInt(getComputedStyle(refs.gallery).gap) || 0;\n\n//   // Scroll down by 2 items\n//   window.scrollBy({\n//     top: (height + gap) * 2,\n//     left: 0,\n//     behavior: 'smooth'\n//   });\n// }\n\n\n// function scrollNewItems(gallery, count) {\n//   if (!gallery) return;\n\n//   // All <li> elements in the gallery\n//   const allItems = gallery.querySelectorAll('li');\n//   const totalItems = allItems.length;\n//   if (totalItems === 0) return;\n\n//   // First of the newly added items (assume last 'count' items are new)\n//   const firstNewIndex = Math.max(totalItems - count, 0);\n//   const galleryItem = allItems[firstNewIndex];\n//   if (!galleryItem) return;\n\n//   // Measure height of the element\n//   const rect = galleryItem.getBoundingClientRect();\n\n//   // Get vertical gap from the gallery container\n//   const gap = parseInt(getComputedStyle(gallery).gap) || 0;\n\n//   // Scroll down by the height of 'count' items\n//   window.scrollBy({\n//     top: (rect.height + gap) * count,\n//     left: 0,\n//     behavior: 'smooth'\n//   });\n// }\n\n\nlet elem = refs.gallery.firstElementChild;\nlet rect = elem.getBoundingClientRect();\nfor (const key in rect) {\n  if (typeof rect[key] !== \"function\") {\n    let para = document.createElement(\"p\");\n    para.textContent = `${key} : ${rect[key]}`;\n    document.body.appendChild(para);\n    console.log(para);\n  }\n}\n\nwindow.scrollBy({\n  top: 100,\n  left: 100,\n  behavior: \"smooth\",\n});\n\n\n\n\n\n\n\n"],"names":["refs","lightbox","SimpleLightbox","createGallery","images","append","markup","image","clearGallery","showLoader","hideLoader","showLoader2","hideLoader2","showLoadMoreButton","hideLoadMoreButton","getImagesByQuery","query","currentPage","result","axios","error","PER_PAGE","totalPages","e","iziToast","handleLoadMoreBtn","elem","rect","key","para"],"mappings":"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"}