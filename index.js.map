{"version":3,"file":"index.js","sources":["../src/js/refs.js","../src/js/render-functions.js","../src/js/pixabay-api.js","../src/img/bi_x-octagon.svg","../src/main.js"],"sourcesContent":["export const refs = {\n    form: document.querySelector('.form'),\n    input: document.querySelector('input[name=\"search-text\"]'),\n    gallery: document.querySelector('.js-gallery'),\n    loader: document.querySelector('.js-loader'),\n    loadContainer: document.querySelector('.load-container'),\n    button: document.querySelector('button'),\n    loadMoreBtn: document.querySelector('.js-more-button'),\n  };","  import { refs } from './refs.js'\n  import SimpleLightbox from \"simplelightbox\";\n  import \"simplelightbox/dist/simple-lightbox.min.css\";\n  \n  export const lightbox = new SimpleLightbox(\".js-gallery a\", {\n    captions: true,\n    captionsData: \"alt\",\n    captionDelay: 250,\n    captionPosition: \"bottom\"\n  });\n\n  export function createGallery(images, append = false) {\n    const markup = images.map(image => (\n      `<li class=\"gallery-item\">\n      <div class=\"gallery-container\">\n      <div class=\"gallery\">\n        <a class=\"preview\" href=\"${image.largeImageURL}\"><img src=\"${image.webformatURL}\" alt=\"${image.tags}\" title=\"\"/></a>\n    </div>\n\n    <div class=\"description\">\n          <div class=\"sub-descr\">\n          <span class=\"img-descr-title\">Likes</span>\n          <span class=\"img-descr\">${image.likes}</span>\n        </div>\n        <div class=\"sub-descr\">\n          <span class=\"img-descr-title\">Views</span>\n          <span class=\"img-descr\">${image.views}</span>\n        </div>\n        <div class=\"sub-descr\">\n          <span class=\"img-descr-title\">Comments</span>\n          <span class=\"img-descr\">${image.comments}</span>\n        </div>\n        <div class=\"sub-descr\">\n          <span class=\"img-descr-title\">Downloads</span>\n          <span class=\"img-descr\">${image.downloads}</span>\n        </div>\n    </div>\n    </div>\n    </li>`\n\n    )).join('');\n\n    if (append) {\n      refs.gallery.insertAdjacentHTML(\"beforeend\", markup);\n    } else {\n      refs.gallery.innerHTML = markup;\n    };\n    lightbox.refresh();\n  };\n\n\n  export function clearGallery() {\n    refs.gallery.innerHTML = '';\n  };\n\n  export function showLoader() {\n    refs.loader.classList.remove('hidden');\n  };\n\n  export function hideLoader() {\n    refs.loader.classList.add('hidden');\n  };\n\n  export function showLoadMoreButton() {\n    refs.loadMoreBtn.classList.remove('hidden');\n\n  };\n\n  export function hideLoadMoreButton() {\n    refs.loadMoreBtn.classList.add('hidden');\n  };\n\n\n\n\n","import axios from 'axios';\n\n export async function getImagesByQuery(query, currentPage) {\n   try {\n    const result = await axios.get('https://pixabay.com/api/', {\n    params: {\n        key: '53354647-5c23245d0a5319fc788c83675',\n            q: query,\n            image_type: 'photo',\n            orientation: 'horizontal',\n            safesearch: true,\n            per_page: 15,\n            page: currentPage,\n    }\n   });\n   return result.data;\n} catch (error) {\n    console.log(error);\n};\n }; \n\n\n\n\n","export default \"data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='24'%20height='24'%20fill='none'%3e%3cg%20fill='%23FAFAFB'%20clip-path='url(%23a)'%3e%3cpath%20d='M6.81.219A.75.75%200%200%201%207.34%200h9.32a.75.75%200%200%201%20.53.219l6.591%206.591a.75.75%200%200%201%20.219.53v9.32a.75.75%200%200%201-.219.53l-6.591%206.591a.75.75%200%200%201-.53.219H7.34a.75.75%200%200%201-.53-.219L.219%2017.19A.75.75%200%200%201%200%2016.66V7.34a.75.75%200%200%201%20.219-.53zM7.65%201.5%201.5%207.65v8.7l6.15%206.15h8.7l6.15-6.15v-8.7L16.35%201.5z'/%3e%3cpath%20d='M6.969%206.969a.75.75%200%200%201%201.062%200L12%2010.939l3.969-3.97a.75.75%200%201%201%201.062%201.062L13.06%2012l3.97%203.969a.752.752%200%200%201-1.062%201.062l-3.97-3.97-3.968%203.97a.753.753%200%200%201-1.225-.244.75.75%200%200%201%20.163-.818L10.939%2012%206.97%208.031a.75.75%200%200%201%200-1.062'/%3e%3c/g%3e%3cdefs%3e%3cclipPath%20id='a'%3e%3cpath%20fill='%23fff'%20d='M0%200h24v24H0z'/%3e%3c/clipPath%3e%3c/defs%3e%3c/svg%3e\"","import { refs } from './js/refs';\nimport { clearGallery } from './js/render-functions';\nimport { showLoader } from './js/render-functions';\nimport { hideLoader } from './js/render-functions';\nimport { getImagesByQuery } from './js/pixabay-api';\nimport { createGallery } from './js/render-functions';\nimport { showLoadMoreButton } from './js/render-functions';\nimport { hideLoadMoreButton } from './js/render-functions';\nimport octagonIcon from './img/bi_x-octagon.svg';\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nconst PER_PAGE = 15;\nlet query;\nlet currentPage = 1;\nlet totalPages;\n\nrefs.form.addEventListener('submit', async e => {\n    e.preventDefault();\n\n    refs.input.blur();\n    currentPage = 1;\n    const formData = new FormData(e.target);\n    query = formData.get('search-text').trim();\n\n    if(!query) {\n      iziToast.show({\n        message: `Type something to begin your search.`,\n        color: '#EF4040',\n        messageColor: 'white',\n        position: 'topRight',\n        messageSize: '20',\n        timeout: '2000',\n        theme: 'dark',\n      }); return;\n    } ;\n    showLoader();\n    clearGallery();\n    hideLoadMoreButton();\n\n    try{\n      const result = await getImagesByQuery(query, currentPage);\n      if(!result.hits || result.hits.length === 0) {\n        iziToast.show({\n          message: `Sorry, there are no images matching your search query. Please try again!`,\n          iconUrl: '/img/bi_x-octagon.svg',\n          color: '#EF4040',\n          position: 'topRight',\n          messageSize: '20',\n          timeout: '4000',\n          theme: 'dark',\n          class: 'custom-toast',\n        }); \n        hideLoader();\n        refs.form.reset();\n        return;\n      }\n      createGallery(result.hits);\n      totalPages = Math.ceil(result.totalHits / PER_PAGE);\n      handleLoadMoreBtn();\n  \n    } catch {\n      iziToast.show({\n          message: `Something went wrong. Please try again later.`,\n          iconUrl: octagonIcon,\n          color: '#EF4040',\n          position: 'topRight',\n          messageSize: '20',\n          timeout: '4000',\n          theme: 'dark',\n        });\n    };\n\n    hideLoader();\n    refs.form.reset();\n  });\n\n\n  refs.loadMoreBtn.addEventListener('click', async () => {\n    showLoader();\n    hideLoadMoreButton();\n    currentPage += 1;\n  \n    try{\n      const result = await getImagesByQuery(query, currentPage);\n      if(!result.hits || result.hits.length === 0) {\n        iziToast.show({\n          message: `Sorry, there are no images matching your search query. Please try again!`,\n          iconUrl: './img/bi_x-octagon.svg',\n          color: '#EF4040',\n          position: 'topRight',\n          messageSize: '20',\n          timeout: '4000',\n          theme: 'dark',\n        }); \n        refs.form.reset();\n        return;\n      }\n      handleLoadMoreBtn();\n      createGallery(result.hits, true);\n          \n      if (refs.gallery.firstElementChild) {\n        const rect = refs.gallery.firstElementChild.getBoundingClientRect();\n        const heightToScroll = rect.height * 2;\n        window.scrollBy({ \n           top: heightToScroll,\n           behavior: \"smooth\" });\n        };\n      \n    } catch {\n      iziToast.show({\n          message: `Something went wrong. Please try again later.`,\n          // iconUrl: './img/bi_x-octagon.svg',\n          color: '#EF4040',\n          position: 'topRight',\n          messageSize: '20',\n          timeout: '4000',\n          theme: 'dark',\n        });\n    };\n    hideLoader();\n    refs.form.reset();\n  });\n\n\n  function handleLoadMoreBtn() {\n    if(currentPage < totalPages) {\n      showLoadMoreButton();\n    } else {\n      hideLoadMoreButton();\n      iziToast.show({\n        message: `We're sorry, but you've reached the end of search results.`,\n        // iconUrl: './img/bi_x-octagon.svg',\n        backgroundColor: '#3b82f6',\n        position: 'topRight',\n        messageSize: '20',\n        timeout: '4000',\n        theme: 'dark',\n      });\n    };\n  };\n\n\n\n\n\n\n\n\n\n\n"],"names":["refs","lightbox","SimpleLightbox","createGallery","images","append","markup","image","clearGallery","showLoader","hideLoader","showLoadMoreButton","hideLoadMoreButton","getImagesByQuery","query","currentPage","axios","error","octagonIcon","PER_PAGE","totalPages","e","iziToast","result","handleLoadMoreBtn","heightToScroll"],"mappings":"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"}